{% extends "base-sec.html" %}
{% load staticfiles %}
{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Kashan Holiday</title>
    <link rel="Shortcut icon" href="{% static 'img/logo.png' %}">
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"> -->
    <script src="{% static 'js/jquery3.3.1.js' %}"></script>
    
    <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script> -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="{%static 'js/bootstrap.min.js' %}"></script>
    <!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script> -->
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    <link rel="stylesheet" href="{% static 'tours/tour_style.css' %}">
    <link rel="stylesheet" href="{% static 'tours/main.css' %}">
</head>

<body>

<!-- Navigation -->
<nav class="navbar navbar-expand-md  bg-outline-light navbar-wrapper">
<div class="container-fluid">
		<a href="#" class="navbar-brand"><img id="top-icon" src="{% static 'img/logo.png' %}" style="width: 30px; height: 30px;" alt="logo"></a>
		<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbar-Responsive">
			<span class="navbar-toggler-icon my-toggler "></span>
		</button>
		<li>
			<a href="#"><i class="fas fa-shopping-cart navbar-cart"></i><span class="badge">0</span></a>
		</li>
		<duv class="collapse navbar-collapse" id="navbar-Responsive">
			<ul class="navbar-nav ml-auto">
				<li class="nav-item act">
					<a href="#" class="nav-link">
						صفحه اصلی
					</a>
				</li>
				<li class="nav-item">
					<a href="{% url "tours:Tour_List"%}" class="nav-link">
						تور
					</a>
				</li>
				<li class="nav-item">
					<a href="#" class="nav-link">
						هتل
					</a>
				</li>
				<li class="nav-item">
					<a href="{% url 'restaurants:list' %}" class="nav-link">
						رستوران
					</a>
				</li>
				<li class="nav-item ">
					<a href="{% url 'blog:list' %}" class="nav-link">
						وبلاگ
					</a>
				</li>
			</ul>
		</div>
</div>
</nav>

<script>
{% block jquery %}

function setPrice(){
    var price = $(".variation_select option:selected").attr("data-price");

    var sale_price = $(".variation_select option:selected").attr("data-sale-price");
    if (sale_price != "" && sale_price != "None" && sale_price != null){
        $("#price").html("<h4>" + sale_price + " <small class='org-price'> " + price + "</small></h4>");
    } else{
        $("#price").html(price);
    }
}
setPrice();
// var price = $(".variation_select option:selected").attr("data-price");
// $("#price").text(price);

$(".variation_select").change(function(){
    setPrice();
    var img = $(".variation_select option:selected").attr("data-img");
    $("img").attr("src", img);

});



//Ajax

// Ajax for add items to the cart!!!
$("#submit-btn").click(function (event) {
    event.preventDefault(); //prevent to do the default action witch is to submit
    var formData = $("#add-form").serialize();
    console.log(formData);
    $.ajax({
        type: "GET",
        url: "{% url 'cart' %}",
        data: formData,
        success: function (data) {
            // console.log(data);
            // $("#jquery-message").text("Added " + data.item_added + " Deleted " + data.deleted );
            // showFlashMessage("پیامی برای نمونه");
            showFlashMessage(data.flash_message);
            updateCartItemBadge();
        },
        error: function (response, error) {
            // console.log(response);
            // console.log(error);
            $("#add-form").submit()
        },
    })


    // $("add-form").submit()
});

{% endblock %}
</script>
{% block content %}
